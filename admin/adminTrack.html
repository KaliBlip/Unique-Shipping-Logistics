<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Parcel Tracking Dashboard</title>

    <style>
        label {
            display: inline-block;
            font-size: 16px;
            font-family: Arial, Helvetica, sans-serif;
            width: 200px;
        }

        input,
        select {
            width: 250px;
            height: 30px;
            font-size: 16px;
            font-family: Arial, Helvetica, sans-serif;
        }

        button {
            height: 35px;
            width: 90px;
            font-size: 16px;
        }

        .container {
            width: 600px;
            margin: auto;
        }

        .form-group {
            margin-bottom: 15px;
        }
    </style>

</head>

<body>
    <div class="container">
        <h1>Parcel Tracking Dashboard</h1>

        <div class="form-group">
            <label>Tracking ID</label>
            <input type="text" id="TrackingIdInp">
        </div>

        <div class="form-group">
            <label>Name of Parcel</label>
            <input type="text" id="ParcelNameInp">
        </div>

        <div class="form-group">
            <label>Source</label>
            <input type="text" id="SourceInp">
        </div>

        <div class="form-group">
            <label>Destination</label>
            <input type="text" id="DestinationInp">
        </div>

        <div class="form-group">
            <label>Status</label>
            <select id="StatusInp">
                <option value="Pending">Pending</option>
                <option value="In Transit">In Transit</option>
                <option value="Delivered">Delivered</option>
            </select>
        </div>

        <div class="form-group">
            <label>Date of Dispatch</label>
            <input type="date" id="DispatchDateInp">
        </div>

        <div class="form-group">
            <label>Estimated Delivery Date</label>
            <input type="date" id="DeliveryDateInp">
        </div>

        <div class="form-group">
            <label>Current Location</label>
            <input type="text" id="CurrentLocationInp">
        </div>

        <div class="form-group">
            <label>Weight (kg)</label>
            <input type="number" id="WeightInp">
        </div>

        <div class="form-group">
            <label>Dimensions (LxWxH cm)</label>
            <input type="text" id="DimensionsInp" placeholder="Length x Width x Height">
        </div>

        <div class="form-group">
            <button id="AddBtn">Add</button>
            <button id="RetBtn">Retrieve</button>
            <button id="UpdBtn">Update</button>
            <button id="DelBtn">Delete</button>
        </div>
    </div>
</body>

<script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.4/firebase-app.js";
    import { getAnalytics } from "https://www.gstatic.com/firebasejs/10.12.4/firebase-analytics.js";
    import { getDatabase, ref, child, get, set, update, remove } from "https://www.gstatic.com/firebasejs/10.12.4/firebase-database.js";

    const firebaseConfig = {
        apiKey: "AIzaSyAOOj86UOijPcIzB3AgsiGzmMDun-nditA",
        authDomain: "unique-logistix.firebaseapp.com",
        databaseURL: "https://unique-logistix-default-rtdb.firebaseio.com",
        projectId: "unique-logistix",
        storageBucket: "unique-logistix.appspot.com",
        messagingSenderId: "820421076514",
        appId: "1:820421076514:web:8776f14e9c78ff5db78c7b",
        measurementId: "G-6Q2RY0LM09"
    };

    // Initialize Firebase
    const app = initializeApp(firebaseConfig);
    // const analytics = getAnalytics(app); // Uncomment if analytics are needed
    const db = getDatabase();

    const TrackingIdInp = document.getElementById('TrackingIdInp');
    const ParcelNameInp = document.getElementById('ParcelNameInp');
    const SourceInp = document.getElementById('SourceInp');
    const DestinationInp = document.getElementById('DestinationInp');
    const StatusInp = document.getElementById('StatusInp');
    const DispatchDateInp = document.getElementById('DispatchDateInp');
    const DeliveryDateInp = document.getElementById('DeliveryDateInp');
    const CurrentLocationInp = document.getElementById('CurrentLocationInp');
    const WeightInp = document.getElementById('WeightInp');
    const DimensionsInp = document.getElementById('DimensionsInp');

    const AddBtn = document.getElementById('AddBtn');
    const RetBtn = document.getElementById('RetBtn');
    const UpdBtn = document.getElementById('UpdBtn');
    const DelBtn = document.getElementById('DelBtn');

    function AddData() {
        set(ref(db, 'ParcelSet/' + TrackingIdInp.value), {
            trackingId: TrackingIdInp.value,
            nameOfParcel: ParcelNameInp.value,
            source: SourceInp.value,
            destination: DestinationInp.value,
            status: StatusInp.value,
            dispatchDate: DispatchDateInp.value,
            deliveryDate: DeliveryDateInp.value,
            currentLocation: CurrentLocationInp.value,
            weight: Number(WeightInp.value),
            dimensions: DimensionsInp.value
        })
            .then(() => {
                alert("Data Added Successfully");
            })
            .catch((error) => {
                alert("Unsuccessful");
                console.log(error);
            });
    }

    function RetData() {
        const dbRef = ref(db);
        get(child(dbRef, 'ParcelSet/' + TrackingIdInp.value)).then((snapshot) => {
            if (snapshot.exists()) {
                TrackingIdInp.value = snapshot.val().trackingId;
                ParcelNameInp.value = snapshot.val().nameOfParcel;
                SourceInp.value = snapshot.val().source;
                DestinationInp.value = snapshot.val().destination;
                StatusInp.value = snapshot.val().status;
                DispatchDateInp.value = snapshot.val().dispatchDate;
                DeliveryDateInp.value = snapshot.val().deliveryDate;
                CurrentLocationInp.value = snapshot.val().currentLocation;
                WeightInp.value = snapshot.val().weight;
                DimensionsInp.value = snapshot.val().dimensions;
            } else {
                alert("Parcel does not exist");
            }
        })
            .catch((error) => {
                alert("Unsuccessful");
                console.log(error);
            });
    }

    function UpdateData() {
        update(ref(db, 'ParcelSet/' + TrackingIdInp.value), {
            nameOfParcel: ParcelNameInp.value,
            source: SourceInp.value,
            destination: DestinationInp.value,
            status: StatusInp.value,
            dispatchDate: DispatchDateInp.value,
            deliveryDate: DeliveryDateInp.value,
            currentLocation: CurrentLocationInp.value,
            weight: Number(WeightInp.value),
            dimensions: DimensionsInp.value
        })
            .then(() => {
                alert("Data Updated Successfully");
            })
            .catch((error) => {
                alert("Unsuccessful");
                console.log(error);
            });
    }

    function DeleteData() {
        remove(ref(db, 'ParcelSet/' + TrackingIdInp.value))
            .then(() => {
                alert("Data Deleted Successfully");
            })
            .catch((error) => {
                alert("Unsuccessful");
                console.log(error);
            });
    }

    AddBtn.addEventListener('click', AddData);
    RetBtn.addEventListener('click', RetData);
    UpdBtn.addEventListener('click', UpdateData);
    DelBtn.addEventListener('click', DeleteData);
</script>

</html>
